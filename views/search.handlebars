<script type="text/javascript" src="/js/search.js"></script>

<div class="row" id="availableTimesAndDates">
    {{#each this.jsonresp}}
        {{#each doctor}}
            <div class="col-4">
                <div class="card">
                    <div class="card-header">
                        {{name}}
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-4">
                                {{#if photoLink}}
                                    <img src={{photoLink}} class="card-img" alt="..." style="height:100%">
                                {{else}}
                                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSpimsX9cFYACIZXXmGAM9WMylG9K6bkXsWE9GXuiR-Ms3ClQ4f" class="card-img" alt="..." style="max-height:250px; max-width: 100px">
                                {{/if}}
                            </div>
                            <div class="col-8">
                                <div class="row">
                                    <div class="col">
                                        <small>Specialty: {{../name}}</small>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col border border rounded pl-0 pr-0">
                                        {{!-- <small style="font-size: 0.8rem">Offices</small> --}}
                                        <select name="officesDropdown" id="officesDropdown" class="custom-select">
                                            {{#each office}}
                                            <option value={{id}}>{{address}}</option>
                                            {{/each}}
                                        </select>
                                        <button type="button" class="btn btn-primary" style="width: 100%" id="officePickerButton">Show availability!</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{#each office}}
                            <div class={{#if @first}}"row officeRow"{{else}}"row officeRow d-none"{{/if}} id={{id}}>
                                <div class="col">
                                    <div id={{datesCarousel id}} class="carousel slide" data-ride="carousel" data-interval="false">
                                        <div class="carousel-inner">
                                            {{#each availability}}
                                                <div class={{#if @first}}"carousel-item active text-center"{{else}}"carousel-item text-center"{{/if}}>
                                                    <hr>
                                                    <span>
                                                        <p>{{../address}}</p>
                                                        <p> - </p>
                                                        <p>{{date date}}</p>
                                                    </span>
                                                    {{#each availability}}
                                                        <button type="button" class="btn btn-primary mt-2" style="width: 4rem" id={{timeId this.timeslot}} data-doctor={{../../../id}} data-office={{../../id}}>{{time this.timeslot}}</button>
                                                    {{/each}}
                                                </div>
                                            {{/each}}
                                        </div>
                                        <a class="carousel-control-prev" href={{htDatesCarousel id}} role="button" data-slide="prev">
                                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Previous</span>
                                        </a>
                                        <a class="carousel-control-next" href={{htDatesCarousel id}} role="button" data-slide="next">
                                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Next</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {{/each}}
                    </div>
                </div>
            </div>
        {{/each}}
    {{/each}}
</div>
